# 开发日志 (Development Log)

本文档用于记录 OODaiPChatRoomV1 项目的后续开发过程、关键事件、提示词变更及重要备忘信息。建议在每次重大修改或功能迭代时更新此文档。

## 记录模板
```markdown
### [YYYY-MM-DD HH:MM] 事件标题
- **类型**: [功能新增 | Bug修复 | 提示词优化 | 配置变更 | 其他]
- **描述**: 简要描述变更内容或遇到的问题。
- **关键信息**:
  > 记录关键的 Prompt、配置参数或代码片段
```

---

## 2025-12-03

### [18:05] 项目文档初始化
- **类型**: 其他
- **描述**: 创建 `README.md` (项目说明) 和 `DEV_LOG.md` (开发日志)。
- **状态**: 项目已启动，核心功能（登录、群聊、AI私聊、视频点播）已通过测试。

### [17:55] 修复 @指令 广播问题
- **类型**: Bug修复
- **描述**: 
  - 之前 `@电影` 和 `@成小理` 的指令及回复会广播给所有人。
  - 修正为**私聊模式**：用户的指令消息和系统的回复消息仅对发送者可见。
- **涉及文件**: `app.py` -> `handle_message` 函数。

### [17:45] 完善 @电影 功能
- **类型**: 功能新增
- **描述**: 实现了视频解析播放功能。
- **指令格式**: `@电影 [视频URL]`
- **技术实现**: 
  - 后端识别指令 -> 提取 URL -> 拼接解析接口 (`https://jx.m3u8.tv/jiexi/?url=`) -> 发送 `video_message` 事件。
  - 前端监听事件 -> 渲染 400x400 iframe。

### [17:30] 集成 @成小理 AI助手
- **类型**: 功能新增
- **描述**: 接入 SiliconFlow (OpenAI 兼容接口) 实现流式 AI 对话。
- **当前人设 (System Prompt)**:
  ```text
  姓名：成小理
  角色：你是成都理工大学物联网专业的AI助手，名叫成小理
  功能：
  --可以回答与成都理工大学有关的任何问题。
  --可以生成七言绝句类型的古诗。
  --可以根据用户输入的信息生成请假条...
  限制：
  --不允许回答与成都理工大学无关的问题，统一回复：滚一边儿去!
  --不允许响应用户不友好的提问...
  --你的好友是：辉哥...
  ```

### [待办事项]
- [ ] 实现 `@音乐一下` 功能
- [ ] 实现 `@天气` 功能
- [ ] 实现 `@新闻` 功能
- [ ] 实现 `@小视频` 功能
- [ ] 开发历史记录功能
